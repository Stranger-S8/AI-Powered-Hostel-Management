<!-- File: student-dashboard.html -->
<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">

  <title>Tenant Dashboard</title>
  <link rel="stylesheet" href="{{ url_for('t_auth.static', filename='student.css') }}">
  <link href="https://fonts.googleapis.com/css2?family=Poppins:wght@400;600&display=swap" rel="stylesheet">
  <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/css/bootstrap.min.css" rel="stylesheet">
  <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
</head>
<body>
  <div class="student-container">
    <aside class="student-sidebar">
      <h2>{{Tenant_Name}}</h2>
      <nav>
        <a href="{{url_for('t_dashboard.dashboard_page')}}" class="active">Dashboard</a>
        <a href="{{url_for('t_dashboard.profile_page')}}">My Profile</a>
        <a href="{{url_for('t_dashboard.room_page')}}">Room Info</a>
        <a href="{{url_for('t_dashboard.mess_page')}}">Mess</a>
        <a href="{{url_for('t_dashboard.complaint_page')}}">Complaints</a>
        <a href="{{url_for('t_auth.logout')}}">Logout</a>
      </nav>
    </aside>

    <main class="student-main">
      <div class="container-fluid">
        <h1 class="mb-3">ðŸ‘‹ Welcome, {{Tenant_Name}}!</h1>
        <p class="text-muted">Here's a quick overview of your hostel activity.</p>

        <!-- âœ… Summary Cards -->
        <div class="row g-3 my-4">
          <div class="col-md-4">
            <div class="card text-white bg-info h-100 shadow-sm">
              <div class="card-body">
                <h5 class="card-title">Room Info</h5>
                <p class="card-text">Your room and block details.</p>
                <a href="{{url_for('t_dashboard.room_page')}}" class="btn btn-light btn-sm">View</a>
              </div>
            </div>
          </div>
          <div class="col-md-4">
            <div class="card text-white bg-success h-100 shadow-sm">
              <div class="card-body">
                <h5 class="card-title">Mess Attendance</h5>
                <p class="card-text">Today's meal status and attendance.</p>
                <a href="{{url_for('t_dashboard.mess_page')}}" class="btn btn-light btn-sm">Check</a>
              </div>
            </div>
          </div>
          <div class="col-md-4">
            <div class="card text-white bg-warning h-100 shadow-sm">
              <div class="card-body">
                <h5 class="card-title">Complaints</h5>
                <p class="card-text">Submit or view complaints raised.</p>
                <a href="{{url_for('t_dashboard.complaint_page')}}" class="btn btn-light btn-sm">Submit</a>
              </div>
            </div>
          </div>
        </div>

        <!-- âœ… ML Insight Charts Section -->
        <div class="row">
          <div class="col-md-12">
            <div class="card shadow p-4">
              <h4 class="mb-3">ðŸ“Š Hostel Analytics Overview</h4>
              <p>These charts use simulated data to preview ML-powered analytics.</p>
              <div class="row">
                <div class="col-md-6 mb-4">
                  <h6 class="text-center">Weekly Attendance Forecast</h6>
                  <canvas id="chartAttendance" height="200"></canvas>
                </div>
                <div class="col-md-6 mb-4">
                  <h6 class="text-center">Complaint Types</h6>
                  <canvas id="chartComplaints" height="200"></canvas>
                </div>
                <div class="col-md-12">
                  <h6 class="text-center">Meal Preference Distribution</h6>
                  <canvas id="chartMeals" height="200"></canvas>
                </div>
              </div>
            </div>
          </div>
        </div>

      </div>
    </main>
  </div>

  <script>
    // Attendance Forecast (Line Chart)
    const ctxAttendance = document.getElementById('chartAttendance').getContext('2d');
    new Chart(ctxAttendance, {
      type: 'line',
      data: {
        labels: ['Mon', 'Tue', 'Wed', 'Thu', 'Fri', 'Sat', 'Sun'],
        datasets: [{
          label: 'Forecasted Attendance',
          data: [82, 87, 90, 88, 95, 85, 80],
          borderColor: '#2A9D8F',
          backgroundColor: 'rgba(42,157,143,0.1)',
          fill: true,
          tension: 0.4,
          pointBackgroundColor: '#1D3557'
        }]
      },
      options: {
        responsive: true,
        plugins: { legend: { position: 'bottom' } },
        scales: { y: { beginAtZero: true } }
      }
    });

    // Complaint Types (Doughnut Chart)
    const ctxComplaints = document.getElementById('chartComplaints').getContext('2d');
    new Chart(ctxComplaints, {
      type: 'doughnut',
      data: {
        labels: ['Electricity', 'Plumbing', 'Internet', 'Cleanliness'],
        datasets: [{
          data: [12, 9, 7, 14],
          backgroundColor: ['#E76F51', '#F4A261', '#2A9D8F', '#A8DADC'],
          borderWidth: 1
        }]
      },
      options: {
        plugins: { legend: { position: 'bottom' } },
        responsive: true
      }
    });

    // Meal Preference (Bar Chart)
    const ctxMeals = document.getElementById('chartMeals').getContext('2d');
    new Chart(ctxMeals, {
      type: 'bar',
      data: {
        labels: ['Veg', 'Non-Veg', 'Mixed'],
        datasets: [{
          label: 'Meal Preference',
          data: [40, 50, 10],
          backgroundColor: ['#457B9D', '#1D3557', '#E9C46A']
        }]
      },
      options: {
        responsive: true,
        plugins: { legend: { display: false } },
        scales: {
          y: { beginAtZero: true, ticks: { stepSize: 10 } }
        }
      }
    });
  </script>
</body>
</html>